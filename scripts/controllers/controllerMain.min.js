"use strict";angular.module("angularApp").controller("firstCtrl",function(e,t){e.addField=function(){var t={name:"This is a new field."};e.fields.unshift(t)},e.helloConsole=t.helloConsole,t.getFields(function(t){console.log(t.data),e.fields=t.data}),e.deleteField=function(a,n){t.deleteField(a),e.fields.splice(n,1)},e.saveFields=function(){var a=e.fields.filter(function(e){if(e.edited)return e});t.saveFields(a)}}),angular.module("angularApp").controller("homeCtlr",function(e,t,a,n){e.go=function(e){t.path(e)},e.Home=n}),angular.module("angularApp").controller("newCtlr",function(e,t,a,n){function r(e,t){this.name=e,this.hours=t,this.timeRepo=[],this.selected=!1}e.message="Look! I am a new page.",e.go=function(e){t.path(e)},e.New=n,e.$storage=a,void 0===a.project&&(a.project=[]),e.saveGoal=function(){var t=0,n=new r(e.formObject.name,e.formObject.hours);n.selected=!0,e.$storage.project.length>0?angular.forEach(e.$storage.project,function(r){t++,r.name===n.name?(alert("A track by that name already exists. Please choose a different name."),e.formObject.name=""):r.name!=n.name&&t===e.$storage.project.length&&(e.$storage.project.push(n),e.New.name=n.name,e.New.hours=n.hours,e.New.timeRepo=[],r.name===e.New.name?r.selected=!0:r.selected=!1,a.project=e.$storage.project,e.formObject={name:"",time:""},e.go("project-input-view"))}):(e.$storage.project.push(n),e.New.name=n.name,e.New.hours=n.hours,e.New.timeRepo=[],a.project=e.$storage.project,e.formObject={name:"",time:""},e.go("project-input-view"))}}),angular.module("angularApp").controller("listCtlr",function(e,t,a,n,r,o,i){e.go=function(e){t.path(e)},e.ListItem=i,e.pctgCompleted=function(e){return this.goalTimeInMin=60*e.hours,this.arrayMinutes=e.timeRepo.map(function(e){return e.minutes}),this.sumOfEntries=this.arrayMinutes.reduce(function(e,t){return e+t},0),this.totalAccumulatedHours=this.sumOfEntries/60,this.totalAccumulatedPctg=100*this.sumOfEntries/this.goalTimeInMin,this.totalAccumulatedPctg.toFixed(2)},e.$storage=n,e.projectObject=e.$storage.project,e.loadData=function(t){e.ListItem.name=t.name,e.ListItem.hours=t.hours,e.ListItem.timeRepo=t.timeRepo,angular.forEach(e.$storage.project,function(t){t.name===e.ListItem.name?t.selected=!0:t.selected=!1})};var l=0;angular.element(document.querySelectorAll("li"));e.removeData=function(){if(l<1){var e=angular.element(document.querySelectorAll("li"));e.addClass("slide")}l++},e.restoreCount=function(){angular.element(document.querySelectorAll("li")).removeClass("slide"),l=0},e.deleteTrack=function(t){if(confirm("Are you sure you want to delete this track? All data will be lost.")){var a=0;angular.forEach(e.projectObject,function(n){if(t.name!=n.name)a++;else{var r=a;e.projectObject.splice(r,1)}}),a=0}}}),angular.module("angularApp").controller("inputCtlr",function(e,t,a,n,r,o){e.go=function(e){t.path(e)},e.Input=o,e.$storage=n,angular.forEach(e.$storage.project,function(t){t.selected===!0?e.Input=t:t.selected=!1}),e.timeStamp=function(){var t=new Date,a=t.getMonth()+1;a<10&&(a="0"+a);var n=t.getDate();n<10&&(n="0"+n);var r=t.getFullYear();return e.timeStamp=r+"-"+a+"-"+n,e.timeStamp},e.saveNewData=function(){var t=e.timerWithInterval;e.timer;if(e.newTime={},void 0!=e.date?e.newTime.timeStamp=e.date:e.newTime.timeStamp=e.timeStamp(),t>0){e.newTime.minutes=Math.ceil(e.timerWithInterval/60),angular.forEach(e.$storage.project,function(t){t.name===e.Input.name?(t.timeRepo.push(e.newTime),t.selected=!0,e.Input.timeRepo=t.timeRepo):console.log("no match")});var a=e.Input.timeRepo.slice();a.pop();var r=0;angular.forEach(a,function(t){if(e.Input.timeRepo.slice(-1)[0].timeStamp!=t.timeStamp)r++;else{t.timeStamp=e.Input.timeRepo.slice(-1)[0].timeStamp,t.minutes=e.Input.timeRepo.slice(-1)[0].minutes+t.minutes}}),r<a.length&&e.Input.timeRepo.pop(),r=0,e.timerWithInterval=""}else{e.newTime.minutes=e.timer,angular.forEach(e.$storage.project,function(t){t.name===e.Input.name?(t.timeRepo.push(e.newTime),t.selected=!0,e.Input.timeRepo=t.timeRepo):console.log("no match")});var a=e.Input.timeRepo.slice();a.pop();var r=0;angular.forEach(a,function(t){if(e.Input.timeRepo.slice(-1)[0].timeStamp!=t.timeStamp)r++;else{t.timeStamp=e.Input.timeRepo.slice(-1)[0].timeStamp,t.minutes=e.Input.timeRepo.slice(-1)[0].minutes+t.minutes}}),r<a.length&&e.Input.timeRepo.pop(),r=0,e.timer=""}n.project=e.$storage.project};var i;e.timerWithInterval=0,e.startTimerWithInterval=function(){e.timerWithInterval=0,e.myInterval&&(a.cancel(e.myInterval),e.timerWithInterval=i,e.timerWithInterval++),e.onInterval=function(){e.timerWithInterval++},e.myInterval=a(e.onInterval,1e3)},e.stopTimerWithInterval=function(){e.myInterval&&(a.cancel(e.myInterval),i=e.timerWithInterval)},e.resetTimerWithInterval=function(){e.timerWithInterval=0,i=0,a.cancel(e.myInterval)},e.confirmTime=function(){confirm("Are you sure you want to confirm this time?")&&(e.Input.hours>0&&(e.timer>0||e.timerWithInterval>0)?(e.saveNewData(),e.go("project-output-view")):alert("The time entered must be greater than zero."))}}).filter("hhmmss",function(){return function(e){var t=parseInt(e,10),a=Math.floor(t/3600),n=Math.floor((t-3600*a)/60),r=t-3600*a-60*n;a<10&&(a="0"+a),n<10&&(n="0"+n),r<10&&(r="0"+r);var e=a+":"+n+":"+r;return e}}),angular.module("angularApp").controller("outputCtlr",function(e,t,a,n){e.go=function(e){t.path(e)},e.Output=n,e.$storage=a,angular.forEach(e.$storage.project,function(t){t.selected===!0&&(e.Output=t)}),e.goalTimeInMin=60*e.Output.hours;var r=new Date,o=r.getMonth()+1;o<10&&(o="0"+o);var i=r.getDate();i<10&&(i="0"+i);var l=r.getFullYear(),u=l+"-"+o+"-"+i;angular.forEach(e.Output.timeRepo,function(t){t.timeStamp===u?(e.todaysTime=t.minutes/60,e.todaysPctg=100*t.minutes/e.goalTimeInMin):(e.todaysTime=0,e.todaysPctg=0)}),e.arrayMinutes=e.Output.timeRepo.map(function(e){return e.minutes}),e.sumOfEntries=e.arrayMinutes.reduce(function(e,t){return e+t},0);var m=new Date;m.setDate(m.getDate()-7);var c=m.getDate();c<10&&(c="0"+c);var s=m.getMonth()+1;s<10&&(s="0"+s);var p=m.getFullYear(),g=p+"-"+s+"-"+c,d=0,f=0;angular.forEach(e.Output.timeRepo,function(e){e.timeStamp>g&&(d+=e.minutes,f++)}),e.weekTotalHours=d/60,e.weekTotalPctg=100*d/e.goalTimeInMin,0===f?e.weekAvg=0:e.weekAvg=e.weekTotalHours/f,e.weekDailyAvgPctg=100*e.weekAvg/e.Output.hours;var h=new Date;h.setDate(h.getDate()-30);var v=h.getDate();v<10&&(v="0"+v);var I=h.getMonth()+1;I<10&&(I="0"+I);var y=h.getFullYear(),I=y+"-"+I+"-"+v,w=0,f=0;angular.forEach(e.Output.timeRepo,function(e){e.timeStamp>I&&(w+=e.minutes,f++)}),e.monthTotalHours=w/60,e.monthTotalPctg=100*w/e.goalTimeInMin,0===f?e.monthAvg=0:e.monthAvg=e.monthTotalHours/f,e.monthDailyAvgPctg=100*e.monthAvg/e.Output.hours;var T=new Date;T.setDate(T.getDate()-365);var O=T.getDate();O<10&&(O="0"+O);var A=T.getMonth()+1;A<10&&(A="0"+A);var j=T.getFullYear(),D=j+"-"+A+"-"+O,E=0,f=0;angular.forEach(e.Output.timeRepo,function(e){e.timeStamp>D&&(E+=e.minutes,f++)}),e.yearTotalHours=E/60,e.yearTotalPctg=100*E/e.goalTimeInMin,0===f?e.yearAvg=0:e.yearAvg=e.yearTotalHours/f,e.yearDailyAvgPctg=100*e.yearAvg/e.Output.hours,e.totalAccumulated=e.sumOfEntries,e.totalAccumulatedHours=e.totalAccumulated/60,e.totalAccumulatedPctg=100*e.totalAccumulated/e.goalTimeInMin}),angular.module("angularApp").controller("detailCtlr",function(e,t,a,n){function r(e,t,a,n,r,i,l){var u=[31,0,31,30,31,30,31,31,30,31,30,31],m=new Date(t,e-1,1);m.dayOne=m.getDay()+1;var s=new Date,p=t==s.getFullYear()&&e==s.getMonth()+1?s.getDate():0;u[1]=m.getFullYear()%100!=0&&m.getFullYear()%4==0||m.getFullYear()%400==0?29:28;var g='<div class="'+a+'"><table class="'+a+'" cols="7" cellpadding="0" border="'+l+'" cellspacing="0"><tr align="center">';g+='<td colspan="7" align="center" class="'+n+'">'+o[e-1]+" - "+t+'</td></tr><tr align="center">';var d;for(d=0;d<7;d++)g+='<td class="'+r+'">'+"SMTWTFS".substr(d,1)+"</td>";for(g+='</tr><tr align="center">',c=1;c<=42;c++){var f=c-m.dayOne>=0&&c-m.dayOne<u[e-1]?c-m.dayOne+1:"&nbsp;";f==p&&(f='<span class="today">'+f+"</span>");var h=e;h<10&&(h="0"+h);var v=c-m.dayOne>=0&&c-m.dayOne<u[e-1]?c-m.dayOne+1:"&nbsp;";v<10&&(v="0"+v),g+='<td id="'+t+"-"+h+"-"+v+'" class="'+i+'">'+f+"</td>",c%7==0&&c<36&&(g+='</tr><tr align="center">')}return g+="</tr></table></div>"}e.go=function(e){t.path(e)},e.Detail=n,e.$storage=a.project,angular.forEach(e.$storage,function(t){t.selected===!0?e.Detail=t:t.selected=!1}),e.timeObject=e.Detail.timeRepo;var o=["January","February","March","April","May","June","July","August","September","October","November","December"],i=new Date,l=i.getMonth()+1,u=i.getFullYear(),m=document.getElementById("calendar-menu");m.options[m.selectedIndex];e.updateCalendar=function(t){if(m.selectedIndex>0){var a=parseInt(m.selectedIndex),n=r(a,u,"main","month","daysofweek","days",0);if(m){document.querySelector(".main:last-of-type");document.getElementById("calendar-space").innerHTML=n,angular.forEach(e.Detail.timeRepo,function(e){if(null!=document.getElementById(e.timeStamp)){var t=document.getElementById(e.timeStamp);t.id}if(t){var a=document.createElement("span"),n=document.createTextNode(e.minutes.toFixed(0)+"min");a.appendChild(n),t.appendChild(a)}})}}},e.listOfOptions=[];var c;for(c=0;c<12;c++){var s=o[c]+u;e.listOfOptions.push(s)}document.getElementById("calendar-space").innerHTML=r(l,u,"main","month","daysofweek","days",0),angular.forEach(e.Detail.timeRepo,function(e){if(document.getElementById(e.timeStamp)){var t=document.getElementById(e.timeStamp);t.id}if(t){console.log("00000");var a=document.createElement("span"),n=document.createTextNode(e.minutes.toFixed(0)+"min");a.classList.add("minutes"),a.appendChild(n),t.appendChild(a)}})});